# Submit Analytics

llsubmit4 日志分析工具

## 简介

分析 llsubmit4 的提交失败日志.

## 一维汇总

按单个维度汇总数据。

### 逐日提交失败个数

指定日期范围内每天提交失败的任务个数，忽略个数为0的项目。

~~~
{
    "2016-11-09": 7,
    "2016-11-10": 2,
    "2016-11-12": 19,
    "2016-11-13": 6,
    "2016-11-08": 8,
    "2016-11-07": 6,
    "2016-11-11": 7
}
~~~

### 逐小时提交失败个数

指定日期范围内每小时提交失败的任务个数，忽略个数为0的项目。

~~~
{
    "2016-11-08 16:00:00": 2,
    "2016-11-12 04:00:00": 1,
    "2016-11-08 05:00:00": 1,
    "2016-11-12 03:00:00": 8,
    "2016-11-10 16:00:00": 1,
    /* ... */
    "2016-11-13 05:00:00": 1,
    "2016-11-12 16:00:00": 7,
    "2016-11-12 09:00:00": 1,
    "2016-11-11 11:00:00": 1
},
~~~

### 按业务系统汇总

指定日期范围内各个业务系统提交失败的任务个数，忽略个数为0的项目。

~~~
{
    "gda_gsi_v1r5": 3,
    "grapes_meso_v4_1": 5,
    "gmf_grapes_gfs_v2_0": 4,
    "gmf_gsi_v1r5": 43
}
~~~

### 按星期汇总

指定日期范围内按星期分类的任务个数，忽略个数为0的项目。

~~~
{
    "0": 6,
    "1": 8,
    "2": 7,
    "3": 2,
    "4": 7,
    "5": 19,
    "6": 6
},
~~~

### 按小时汇总

指定日期范围内按小时分类的任务个数，忽略个数为0的项目。

~~~
{
    "15": 7,
    "11": 1,
    "16": 15,
    "05": 4,
    /* ... */
    "01": 2,
    "03": 12,
    "14": 1,
    "23": 2,
    "10": 1
}
~~~

## 二维汇总

按两个维度汇总数据。

### x轴

* 小时
* 星期

### y轴

* 星期
* 系统
* 日期

### 示例

#### 小时/星期

~~~
{
    "0": {
        "1": 1,
        "2": 2,
        "3": 9,
        "4": 2,
        "5": 1,
        "6": 1
    },
    "1": {
        "2": 14,
        "3": 1,
        "4": 2,
        "5": 8,
        "6": 18
    /* ... */
}
~~~

#### 星期/系统

~~~
{
    "0": {
        "rafs": 7,
        "geps_t639": 64,
        "haze_v3_1": 12,
        "geps_post_lev2_1_1": 15,
        "obs_rafs": 36,
        "meps_grapes_v2_0_4": 68
    },
    "1": {
        "rafs": 8,
        "geps_t639": 47,
        "haze_v3_1": 20,
        "geps_post_lev2_1_1": 2,
        "obs_rafs": 35,
        "meps_grapes_v2_0_4": 60
    },
    /* ... */
}
~~~

## 查询功能

### 日志信息

获取日志的概要信息。

~~~
{

    "range": {
        "start_date_time": "2016-10-10T14:59:46",
        "end_date_time": "2016-11-26T16:59:17"
    }
}
~~~


## 安装

需要 python 3 环境。

## 使用

请使用 llsubmit4_error_analyzer.py --help 查询使用方法。
